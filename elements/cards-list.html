<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../card-service/card-service.html">
<link rel="import" href="attendance-card.html">
<link rel="import" href="../bower_components/paper-fab/paper-fab.html">
<link rel="import" href="../bower_components/core-icons/core-icons.html">


<polymer-element name="cards-list" attributes="show">
    <template>
        <style>
            :host {
                display: block;
                width: 100%;
            }
            attendance-card {
                margin-bottom: 30px;
            }
            attendance-card:hover {
                box-shadow: 1px 1px 7px 1px #bfbfbf;
            }
            .presentbar {
                padding: 3px;
                width: 100%;
                background-color: #4CAF50;
                color: #fff;
                text-align: left;
            }
            .latebar {
                padding: 3px;
                width: 0%;
                background-color: #BA68C8;
                color: #fff;
                text-align: left;
            }
            span {
                color: #7e7e7e;
                font-size: 0.8em;
            }
            
            paper-fab {
                position: absolute;
                top: 27%;
                right: 10%;
                background-color: #00B8D4;
            }
        </style>
        <card-service id="service" cards="{{cards}}"></card-service>
        <div layout vertical center>
            <template repeat="{{card in cards}}">
                <attendance-card favorite="{{card.favorite}}" on-favorite-tap="{{handleFavorite}}" hidden?="{{show == 'favorites' && !card.favorite}}">
                    <paper-fab icon="create" title="edit" role="button" tabindex="0" aria-label="edit"></paper-fab>
                    <img src="{{card.avatar}}" width="70" height="70">
                    <h2>{{card.username}}</h2>
                    <div class="presentbar">100 %</div><span>Present </span>
                    <br />
                    <br />
                    <div class="latebar">0%</div>
                    <span>Late </span>
                    <p>{{card.text}}</p>
                </attendance-card>
            </template>
        </div>
    </template>
    <script>
        Polymer({
            handleFavorite: function (event, detail, sender) {
                var post = sender.templateInstance.model.post;
                this.$.service.setFavorite(card.uid, card.favorite);
            }
        });
    </script>
</polymer-element>
